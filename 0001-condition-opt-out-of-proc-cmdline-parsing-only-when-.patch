From a373b0e7bc24b8fffe0ba69e8b92eebf2740332e Mon Sep 17 00:00:00 2001
From: Lennart Poettering <lennart@poettering.net>
Date: Mon, 19 Sep 2011 23:51:15 +0200
Subject: [PATCH] condition: opt out of /proc/cmdline parsing only when
 running in a container, not in a VM

---
 src/condition.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/src/condition.c b/src/condition.c
index f9202f6..8c08be4 100644
--- a/src/condition.c
+++ b/src/condition.c
@@ -75,7 +75,7 @@ static bool test_kernel_command_line(const char *parameter) {
 
         assert(parameter);
 
-        if (detect_virtualization(NULL) > 0)
+        if (detect_container(NULL) > 0)
                 return false;
 
         if ((r = read_one_line_file("/proc/cmdline", &line)) < 0) {
-- 
1.7.4.4

