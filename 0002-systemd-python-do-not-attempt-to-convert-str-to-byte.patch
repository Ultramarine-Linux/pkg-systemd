From 67cbbab20c41dd3a7908bc9e50f56ce3ee607bf7 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Zbigniew=20J=C4=99drzejewski-Szmek?= <zbyszek@in.waw.pl>
Date: Thu, 16 May 2013 00:38:39 -0400
Subject: [PATCH] systemd-python: do not attempt to convert str to bytes

Bug-spotted-by: Steven Hiscocks <steven-systemd@hiscocks.me.uk>
---
 src/python-systemd/journal.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/python-systemd/journal.py b/src/python-systemd/journal.py
index 9ef1ede..8fd1bb3 100644
--- a/src/python-systemd/journal.py
+++ b/src/python-systemd/journal.py
@@ -55,6 +55,9 @@ def _convert_realtime(t):
 def _convert_timestamp(s):
     return _datetime.datetime.fromtimestamp(int(s) / 1000000)
 
+def _convert_trivial(x):
+    return x
+
 if _sys.version_info >= (3,):
     def _convert_uuid(s):
         return _uuid.UUID(s.decode())
@@ -87,6 +90,7 @@ DEFAULT_CONVERTERS = {
     '__REALTIME_TIMESTAMP': _convert_realtime,
     '_SOURCE_MONOTONIC_TIMESTAMP': _convert_source_monotonic,
     '__MONOTONIC_TIMESTAMP': _convert_monotonic,
+    '__CURSOR': _convert_trivial,
     'COREDUMP': bytes,
     'COREDUMP_PID': int,
     'COREDUMP_UID': int,
